# This deploy.yml is a testing fixture
default_flags:
  food: bar
  baz: bing
deploy:
  # Required flags: target, environment, flags
  clusters:
    - target: local
      environment: staging
      flags:
        cloud: local
        image_registry: local-registry
        pull_policy: IfNotPresent
    - target: colo-service
      environment: prod
      flags:
        cloud: colo
        image_registry: ''
        pull_policy: IfNotPresent
    - target: colo-service
      environment: staging
      flags:
        cloud: colo
        image_registry: ''
        pull_policy: IfNotPresent
    - target: pippio-production
      environment: prod
      flags:
        cloud: gcp
        image_registry: gcr.io/kdt-example
        pull_policy: IfNotPresent
    - target: us-east-1
      environment: prod
      flags:
        cloud: aws
        image_registry: ''
        pull_policy: IfNotPresent
    - target: us-east-1
      environment: staging
      flags:
        cloud: aws
        image_registry: ''
        pull_policy: IfNotPresent
    - target: ingestion
      environment: prod
      flags:
        cloud: gcp
        image_registry: gcr.io/kdt-example
        pull_policy: IfNotPresent
    - target: platforms
      environment: prod
      flags:
        cloud: gcp
        image_registry: gcr.io/kdt-example
        pull_policy: IfNotPresent
        feature_grafana: true
        feature_heapster: true
        feature_kube_state_metrics: true
        feature_prometheus_k8s: true
        feature_prometheus_operator: true
        feature_voyager: true
        elasticsearch_hosts: elasticsearch
        kubernetes_major_version: '1'
        kubernetes_minor_version: '8'

  flavors:
    default:
      test_bool: true
image_registries:
  - name: artifactory
    driver: login
    prefix: my-artifactory.com:1234
    config:
      username_var: ARTIFACTORY_USERNAME
      password_var: ARTIFACTORY_PASSWORD
  - name: aws
    driver: aws
    prefix: 123456789.dkr.ecr.us-west-2.amazonaws.com
    config:
      region: us-west-2
  - name: local
    driver: noop
    prefix: local-registry
  - name: gcp
    driver: gcp
    prefix: gcr.io/kdt-example
