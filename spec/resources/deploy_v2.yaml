version: 2
artifacts:
  - name: local-staging
    image_registry: local
    flags:
      target: local
      environment: staging
      cloud: local
  - name: colo-service-prod
    image_registry: aws
    flags:
      target: colo-service
      environment: prod
      cloud: colo
  - name: colo-service-staging
    image_registry: aws
    flags:
      target: colo-service
      environment: staging
      cloud: colo
flavors:
  default: {}
image_registries:
  - name: aws
    driver: aws
    prefix: 123456.dkr.ecr.us-west-2.amazonaws.com
    config:
      region: us-west-2
  - name: gcp
    driver: gcp
    prefix: gcr.io/my-gcp-project
  - name: local
    driver: noop
    prefix: local-registry
hooks:
  - default
  - scripts/render_deploys_hook
